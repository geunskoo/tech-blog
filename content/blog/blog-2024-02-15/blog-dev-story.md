---
title: gatsby 블로그 조회수 기능 만들기
date: "2024-02-15T18:00:00"
type: blog
description: DB가 없는데 어떻게 조회수를 관리 할까?
category: 
  - 블로그 개발
thumbnail: "./thumbnail.png"
---

### 1. 상황
---
Gatsby는 정적 웹 생성기로 서버에서 정적인 HTML 파일을 보여줍니다.  
따라서, 클라이언트에서 발생하는 이벤트를 영구적으로 저장하는 것에 어려움이 있습니다.(서버리스느낌으로 만들꺼야 하더라도 DB가 없습니다.)
그렇다면 조회수(클라이언트에서 보내는 이벤트를 반 영구적으로 저장 해야함) 구현이 불가능 하는 것 일까요?  
그렇지 않습니다.
세상은 넓고 똑똑한 사람은 역시나 많습니다.

단순 상황만 놓고 고려해본다면,  
아래와 같은 방식들을 생각해 볼 수 있습니다.
> 1. 로컬스토리지, 세션, 쿠키를 이용한다.
> 2. 외부의 데이터베이스를 구축한다.
> 3. 외부 서비스를 이용한다.

사실,  
`1번`의 방법은 영구적인 저장이 불가능하기에 패스, 결국에는 나의 조회수 데이터를 영구적으로 저장할 외부의 DB가 구축되어 있어야합니다.  
`2번`의 방법은 비용의 문제와 연결이 됩니다. gatsby, netlify와 같이 블로그와 같은 작은 크기의 서버를 무료로 호스팅 해주는 곳은 많지만 DB서버 및 백엔드 서버를 무료로 이용할 수 있는 곳은 찾기가 힘듭니다. 귀여운 지갑 사정으로 포기!  
`3번`의 방법이 정적 웹 호스팅기에서 할 수 있는 최적은 방법 같습니다. 구글에 조금만 검색해보더라도 3번의 사례들을 여러 건 찾아 볼 수 있었습니다.

저는 3번의 방법으로 조회수 기능을 구현하였습니다.

### 2. <span style="color: #289e8e"> 외부의 서비스</span> 선정
---
외부 서비스를 이용하는 방법으로는 아래와 같은 방법을 찾을 수 있었습니다.
> 1. busuanzi API 이용하기
> 2. google analytics API 이용하기

`1번`의 방법은 조회수를 적용하는 방식이 매우 간단했습니다. 하지만 조회수를 추적하는 방식이 개인적으로는 불투명하고, 중국어로 되어있는 DOCS를 읽으며 유지보수를 할 자신이 없었기에 패스했습니다.(개발자가 중국인이라고 합니다.)  
하지만, 적용 방식이 정말 간단하기에 빠르게 조회수를 적용하고 싶은 분들에게는 방법될 듯 합니다.
[busuanzi 참고](https://busuanzi.ibruce.info/) 한국어 번역기 사용 추천

`2번`의 방법은 비교적 신뢰성이 높은 구글 애널리틱스에서 제공하는 API를 이용하는 방법입니다. 조회수의 실시간 업데이트는 포기해야하지만 높은 신뢰성을 얻을 수 있습니다. 다만 적용방법이 저에게는 다소 까다로웠습니다.

저는 2번의 구글 애널리틱스를 이용하여 조회수를 구현하였습니다. 

### 3.<span style="color: #289e8e"> 구글 애널리틱스</span>를 이용하여 조회수 구현